🔍 Processing FR file: test-Y-Center.fr
📅 Timestamp: 2025-06-10 12:41:24
============================================================

🎯 STEP 2: EasyTune Optimization

Starting EasyTune thread...
Reading FR file: C:\Users\MECHASSY\Documents\Automation1\test-Y-Center.fr

Loaded FR Data:
Version: 2.10.0.3041
Data type: <class 'Aerotech.Automation1.Applications.Wpf.FrequencyResponseResult'>
Block_Layout Filename: C:\Users\MECHASSY\Documents\Automation1\test-Y-Center.fr
Successfully created block layout

Attempting EasyTune optimization...
Open loop response: Aerotech.Automation1.Applications.Shared.FrequencyResponse
Created FrequencyResponseAnalyzer from open loop response: Aerotech.Automation1.Applications.Shared.FrequencyResponseAnalyzer

EasyTune Results:
Success: True
Generations: 14
Time: 0.17s
Logs: C:\Users\mechassy\Desktop\EasyTune\EasyTune Logs\Y_EasyTune 2025.06.10 12.41.25.zip

Analysis complete. Results written to: C:\Users\MECHASSY\Documents\Automation1\EasyTune_Results_test-Y-Center_20250610_124125.txt
EasyTune thread completed

============================================================
                STABILITY ANALYSIS REPORT
============================================================

🔧 FEEDFORWARD ANALYSIS:
   Center Frequency: 158.7 Hz
   Center Magnitude Difference: 3.751 dB
   Slope Difference: -3.506 dB/decade

📐 PHASE MARGIN ANALYSIS:
   Current Value: 70.8° @ 174.8 Hz
   Target Range:  38-52°
   Target Value:  45°
   ⚠️  WARNING - Phase margin too high (maximum: 52°)

📊 GAIN MARGIN ANALYSIS:
   Current Value: 8.6 dB @ 517.9 Hz
   Target Range:  6-15 dB
   Target Value:  10 dB
   ✅ PASS - Gain margin within acceptable range

🎯 SENSITIVITY ANALYSIS:
   Current Value: 4.6 dB @ 489.6 Hz
   Maximum Limit: 6 dB
   Target Value:  6 dB
   ✅ PASS - Sensitivity within acceptable limit

============================================================
⚠️  OVERALL ASSESSMENT: FAIL
   The following issues were identified:
   1. Phase margin too high (70.8° > 52°)
============================================================

Stability Analysis: FAILED
Applying new servo parameters for axis Y
Gain K Before: 2.0
Gain K Shaped: 0.9867
Kip Before: 8.97
Kip Shaped: 38.44
Kip2 Before: 0.0
Kip2 Shaped: 0.0
Kiv Before: 17.9
Kiv Shaped: 76.88
Kpv Before: 1.0
Kpv Shaped: 1.0
Kv Before: 1.0
Kv Shaped: 1.0
Ksi1 Before: 0.0
Ksi1 Shaped: 0.0
Ksi2 Before: 0.0
Ksi2 Shaped: 0.0
Pff Before: 0.0
Pff Shaped: 0.0
Vff Before: 0.0
Vff Shaped: 0.0
🔧 FF ANALYSIS ADJUSTMENT:
   Aff Original: 2.500000
   Center Mag Diff: +3.750851 dB
   Aff Adjusted: 6.250851
Jff Before: 0.0
Jff Shaped: 0.0
Sff Before: 0.0
Sff Shaped: 0.0
Feedforward Advance Before: 0.5
Feedforward Advance Shaped: 0.43434288637489155
✅ Successfully applied shaped servo parameters

📋 PARAMETER UPDATE SUMMARY:
   Axis: Y
   Parameters Applied: 17

🔧 Processing shaped filter configurations...
🔧 Using Drive Frequency as sample frequency: 20000.0 Hz

Processing Servo_Filters Filter 0: Low_Pass
Parameters: {'Cutoff Frequency': 1000.0000000000002}
  Cutoff Frequency: 1000.000 Hz
  Numerator:   [0.019790, 0.039579, 0.019790]
  Denominator: [1.000000, -1.564504, 0.643662]

Processing Feedforward_Filters Filter 0: Low_Pass
Parameters: {'Cutoff Frequency': 999.9998359965327}
  Cutoff Frequency: 1000.000 Hz
  Numerator:   [0.019790, 0.039579, 0.019790]
  Denominator: [1.000000, -1.564504, 0.643662]

Applying Servo_Filters coefficients to axis Y
  Applying Filter 0 (Low_Pass):
    Numerator:   [0.019790, 0.039579, 0.019790]
    Denominator: [1.000000, -1.564504, 0.643662]
    ✅ Applied to ServoLoopFilter00

Applying Feedforward_Filters coefficients to axis Y
  Applying Filter 0 (Low_Pass):
    Numerator:   [0.019790, 0.039579, 0.019790]
    Denominator: [1.000000, -1.564504, 0.643662]
    ✅ Applied to FeedforwardFilter00

🔧 Enabling servo filters at indices: [0]
  Adding filter 0 to bitmask: bit 0 = 1
🔧 Final servoloopfiltersetup bitmask: 1 (binary: 0b1)
✅ Successfully applied all filter coefficients
