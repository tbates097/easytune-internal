üîç Processing FR file: test-U-Center.fr
üìÖ Timestamp: 2025-06-13 14:00:47
============================================================

üéØ STEP 2: EasyTune Optimization

Starting EasyTune thread...
Reading FR file: C:\Users\MECHASSY\Documents\Automation1\test-U-Center.fr

Loaded FR Data:
Version: 2.10.0.3041
Data type: <class 'Aerotech.Automation1.Applications.Wpf.FrequencyResponseResult'>
Block_Layout Filename: C:\Users\MECHASSY\Documents\Automation1\test-U-Center.fr
C:\ProgramData\Miniconda3\envs\production-2.0\Lib\site-packages\control\frdata.py:403: RuntimeWarning:

divide by zero encountered in divide

C:\ProgramData\Miniconda3\envs\production-2.0\Lib\site-packages\control\frdata.py:403: RuntimeWarning:

invalid value encountered in divide

Successfully created block layout

Attempting EasyTune optimization...
Best Result: Aerotech.Automation1.Applications.Interfaces.PopulationMember

EasyTune Results:
Success: True
Generations: 33
Time: 0.39s
Logs: C:\Users\mechassy\Desktop\EasyTune\EasyTune Logs\U_EasyTune 2025.06.13 14.00.48.zip

Analysis complete. Results written to: C:\Users\MECHASSY\Documents\Automation1\EasyTune_Results_test-U-Center_20250613_140048.txt
EasyTune thread completed

============================================================
                STABILITY ANALYSIS REPORT
============================================================

üîß FEEDFORWARD ANALYSIS:
   Center Frequency: 158.7 Hz
   Center Magnitude Difference: nan dB
   Slope Difference: nan dB/decade
Stability Data: {'gain_margin': {'db': 34.03414766631802, 'frequency_hz': 685.3420273569872}, 'phase_margin': {'degrees': 53.122561663318805, 'frequency_hz': 32.972331646041475}, 'sensitivity': {'db': 2.9471358640871603, 'frequency_hz': 54.893932001795484}}

üìê PHASE MARGIN ANALYSIS:
   Current Value: 53.1¬∞ @ 33.0 Hz
   Target Range:  38-52¬∞
   Target Value:  45¬∞
   ‚ö†Ô∏è  WARNING - Phase margin too high (maximum: 52¬∞)

üìä GAIN MARGIN ANALYSIS:
   Current Value: 34.0 dB @ 685.3 Hz
   Target Range:  6-15 dB
   Target Value:  10 dB
   ‚ö†Ô∏è  WARNING - Gain margin too high (maximum: 15 dB)

üéØ SENSITIVITY ANALYSIS:
   Current Value: 2.9 dB @ 54.9 Hz
   Maximum Limit: 6 dB
   Target Value:  6 dB
   ‚úÖ PASS - Sensitivity within acceptable limit

============================================================
‚ö†Ô∏è  OVERALL ASSESSMENT: FAIL
   The following issues were identified:
   1. Phase margin too high (53.1¬∞ > 52¬∞)
   2. Gain margin too high (34.0 dB > 15 dB)
============================================================

Stability Analysis: FAILED
Applying new servo parameters for axis U
Gain K Before: 11.58
Gain K Shaped: 11.9
Kip Before: 3.355
Kip Shaped: 3.39
Kip2 Before: 0.0
Kip2 Shaped: 0.0
Kiv Before: 6.709
Kiv Shaped: 6.78
Kpv Before: 1.0
Kpv Shaped: 1.0
Kv Before: 1.0
Kv Shaped: 1.0
Ksi1 Before: 0.0
Ksi1 Shaped: 0.0
Ksi2 Before: 0.0
Ksi2 Shaped: 0.0
Pff Before: 0.0
Pff Shaped: 0.0
Vff Before: 0.0
Vff Shaped: 0.0
üîß FF ANALYSIS ADJUSTMENT:
   Aff Original: 0.000000
   Center Mag Diff: +nan dB
   Aff Adjusted: nan
Jff Before: 0.0
Jff Shaped: 0.0
Sff Before: 0.0
Sff Shaped: 0.0
Feedforward Advance Before: 0.617581844329834
Feedforward Advance Shaped: 0.6178812743868592
‚úÖ Successfully applied shaped servo parameters

üìã PARAMETER UPDATE SUMMARY:
   Axis: U
   Parameters Applied: 17

üîß Processing shaped filter configurations...
üîß Using Drive Frequency as sample frequency: 20000.0 Hz

Processing Servo_Filters Filter 0: Low_Pass
Parameters: {'Cutoff Frequency': 1000.0000000000002}
  Cutoff Frequency: 1000.000 Hz
  Numerator:   [0.019790, 0.039579, 0.019790]
  Denominator: [1.000000, -1.564504, 0.643662]

Processing Servo_Filters Filter 1: Notch
Parameters: {'Center Frequency': 165.00011498239778, 'Width': 250.00009524911607, 'Depth': 10.000005075329781}
  Center Frequency: 165.000 Hz
  Width: 250.000
  Depth: 10.000 dB
  Numerator:   [0.975615, -1.926083, 0.953059]
  Denominator: [1.000000, -1.926083, 0.928674]

Processing Servo_Filters Filter 2: Notch
Parameters: {'Center Frequency': 311.9986012140423, 'Width': 149.99998861791525, 'Depth': 4.999996776180205}
  Center Frequency: 311.999 Hz
  Width: 150.000
  Depth: 5.000 dB
  Numerator:   [0.984078, -1.917991, 0.943163]
  Denominator: [1.000000, -1.917991, 0.927241]

Processing Servo_Filters Filter 3: Notch
Parameters: {'Center Frequency': 781.2496478911066, 'Width': 117.20009841871175, 'Depth': 6.100003974917572}
  Center Frequency: 781.250 Hz
  Width: 117.200
  Depth: 6.100 dB
  Numerator:   [0.987528, -1.892105, 0.963033]
  Denominator: [1.000000, -1.892105, 0.950561]

Processing Servo_Filters Filter 4: Notch
Parameters: {'Center Frequency': 467.9999350702963, 'Width': 350.0000291555132, 'Depth': 9.999998296514654}
  Center Frequency: 468.000 Hz
  Width: 350.000
  Depth: 10.000 dB
  Numerator:   [0.962719, -1.870555, 0.928237]
  Denominator: [1.000000, -1.870555, 0.890956]

Processing Feedforward_Filters Filter 0: Low_Pass
Parameters: {'Cutoff Frequency': 999.9998359965327}
  Cutoff Frequency: 1000.000 Hz
  Numerator:   [0.019790, 0.039579, 0.019790]
  Denominator: [1.000000, -1.564504, 0.643662]

Applying Servo_Filters coefficients to axis U
  Applying Filter 0 (Low_Pass):
    Numerator:   [0.019790, 0.039579, 0.019790]
    Denominator: [1.000000, -1.564504, 0.643662]
    ‚úÖ Applied to ServoLoopFilter00
  Applying Filter 1 (Notch):
    Numerator:   [0.975615, -1.926083, 0.953059]
    Denominator: [1.000000, -1.926083, 0.928674]
    ‚úÖ Applied to ServoLoopFilter01
  Applying Filter 2 (Notch):
    Numerator:   [0.984078, -1.917991, 0.943163]
    Denominator: [1.000000, -1.917991, 0.927241]
    ‚úÖ Applied to ServoLoopFilter02
  Applying Filter 3 (Notch):
    Numerator:   [0.987528, -1.892105, 0.963033]
    Denominator: [1.000000, -1.892105, 0.950561]
    ‚úÖ Applied to ServoLoopFilter03
  Applying Filter 4 (Notch):
    Numerator:   [0.962719, -1.870555, 0.928237]
    Denominator: [1.000000, -1.870555, 0.890956]
    ‚úÖ Applied to ServoLoopFilter04

Applying Feedforward_Filters coefficients to axis U
  Applying Filter 0 (Low_Pass):
    Numerator:   [0.019790, 0.039579, 0.019790]
    Denominator: [1.000000, -1.564504, 0.643662]
    ‚úÖ Applied to FeedforwardFilter00

üîß Enabling servo filters at indices: [0, 1, 2, 3, 4]
  Adding filter 0 to bitmask: bit 0 = 1
  Adding filter 1 to bitmask: bit 1 = 2
  Adding filter 2 to bitmask: bit 2 = 4
  Adding filter 3 to bitmask: bit 3 = 8
  Adding filter 4 to bitmask: bit 4 = 16
üîß Final servoloopfiltersetup bitmask: 31 (binary: 0b11111)
‚úÖ Successfully applied all filter coefficients
